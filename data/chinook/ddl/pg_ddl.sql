CREATE TABLE ALBUM (
    ALBUM_ID INT NOT NULL,
    TITLE VARCHAR(160) NOT NULL,
    ARTIST_ID INT NOT NULL,
    CONSTRAINT ALBUM_PKEY PRIMARY KEY (ALBUM_ID)
);

CREATE TABLE ARTIST (
    ARTIST_ID INT NOT NULL,
    NAME VARCHAR(120),
    CONSTRAINT ARTIST_PKEY PRIMARY KEY (ARTIST_ID)
);

CREATE TABLE CUSTOMER (
    CUSTOMER_ID INT NOT NULL,
    FIRST_NAME VARCHAR(40) NOT NULL,
    LAST_NAME VARCHAR(20) NOT NULL,
    COMPANY VARCHAR(80),
    ADDRESS VARCHAR(70),
    CITY VARCHAR(40),
    STATE VARCHAR(40),
    COUNTRY VARCHAR(40),
    POSTAL_CODE VARCHAR(10),
    PHONE VARCHAR(24),
    FAX VARCHAR(24),
    EMAIL VARCHAR(60) NOT NULL,
    SUPPORT_REP_ID INT,
    CONSTRAINT CUSTOMER_PKEY PRIMARY KEY (CUSTOMER_ID)
);

CREATE TABLE EMPLOYEE (
    EMPLOYEE_ID INT NOT NULL,
    LAST_NAME VARCHAR(20) NOT NULL,
    FIRST_NAME VARCHAR(20) NOT NULL,
    TITLE VARCHAR(30),
    REPORTS_TO INT,
    BIRTH_DATE TIMESTAMP,
    HIRE_DATE TIMESTAMP,
    ADDRESS VARCHAR(70),
    CITY VARCHAR(40),
    STATE VARCHAR(40),
    COUNTRY VARCHAR(40),
    POSTAL_CODE VARCHAR(10),
    PHONE VARCHAR(24),
    FAX VARCHAR(24),
    EMAIL VARCHAR(60),
    CONSTRAINT EMPLOYEE_PKEY PRIMARY KEY (EMPLOYEE_ID)
);

CREATE TABLE GENRE (
    GENRE_ID INT NOT NULL,
    NAME VARCHAR(120),
    CONSTRAINT GENRE_PKEY PRIMARY KEY (GENRE_ID)
);

CREATE TABLE INVOICE (
    INVOICE_ID INT NOT NULL,
    CUSTOMER_ID INT NOT NULL,
    INVOICE_DATE TIMESTAMP NOT NULL,
    BILLING_ADDRESS VARCHAR(70),
    BILLING_CITY VARCHAR(40),
    BILLING_STATE VARCHAR(40),
    BILLING_COUNTRY VARCHAR(40),
    BILLING_POSTAL_CODE VARCHAR(10),
    TOTAL NUMERIC(10, 2) NOT NULL,
    CONSTRAINT INVOICE_PKEY PRIMARY KEY (INVOICE_ID)
);

CREATE TABLE INVOICE_LINE (
    INVOICE_LINE_ID INT NOT NULL,
    INVOICE_ID INT NOT NULL,
    TRACK_ID INT NOT NULL,
    UNIT_PRICE NUMERIC(10, 2) NOT NULL,
    QUANTITY INT NOT NULL,
    CONSTRAINT INVOICE_LINE_PKEY PRIMARY KEY (INVOICE_LINE_ID)
);

CREATE TABLE MEDIA_TYPE (
    MEDIA_TYPE_ID INT NOT NULL,
    NAME VARCHAR(120),
    CONSTRAINT MEDIA_TYPE_PKEY PRIMARY KEY (MEDIA_TYPE_ID)
);

CREATE TABLE PLAYLIST (
    PLAYLIST_ID INT NOT NULL,
    NAME VARCHAR(120),
    CONSTRAINT PLAYLIST_PKEY PRIMARY KEY (PLAYLIST_ID)
);

CREATE TABLE PLAYLIST_TRACK (
    PLAYLIST_ID INT NOT NULL,
    TRACK_ID INT NOT NULL,
    CONSTRAINT PLAYLIST_TRACK_PKEY PRIMARY KEY (PLAYLIST_ID, TRACK_ID)
);

CREATE TABLE TRACK (
    TRACK_ID INT NOT NULL,
    NAME VARCHAR(200) NOT NULL,
    ALBUM_ID INT,
    MEDIA_TYPE_ID INT NOT NULL,
    GENRE_ID INT,
    COMPOSER VARCHAR(220),
    MILLISECONDS INT NOT NULL,
    BYTES INT,
    UNIT_PRICE NUMERIC(10, 2) NOT NULL,
    CONSTRAINT TRACK_PKEY PRIMARY KEY (TRACK_ID)
);

ALTER TABLE ALBUM
    ADD CONSTRAINT ALBUM_ARTIST_ID_FKEY FOREIGN KEY (
        ARTIST_ID
    )
        REFERENCES ARTIST (
            ARTIST_ID
        ) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE INDEX ALBUM_ARTIST_ID_IDX ON ALBUM (ARTIST_ID);

ALTER TABLE CUSTOMER
    ADD CONSTRAINT CUSTOMER_SUPPORT_REP_ID_FKEY FOREIGN KEY (
        SUPPORT_REP_ID
    )
        REFERENCES EMPLOYEE (
            EMPLOYEE_ID
        ) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE INDEX CUSTOMER_SUPPORT_REP_ID_IDX ON CUSTOMER (SUPPORT_REP_ID);

ALTER TABLE EMPLOYEE
    ADD CONSTRAINT EMPLOYEE_REPORTS_TO_FKEY FOREIGN KEY (
        REPORTS_TO
    )
        REFERENCES EMPLOYEE (
            EMPLOYEE_ID
        ) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE INDEX EMPLOYEE_REPORTS_TO_IDX ON EMPLOYEE (REPORTS_TO);

ALTER TABLE INVOICE
    ADD CONSTRAINT INVOICE_CUSTOMER_ID_FKEY FOREIGN KEY (
        CUSTOMER_ID
    )
        REFERENCES CUSTOMER (
            CUSTOMER_ID
        ) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE INDEX INVOICE_CUSTOMER_ID_IDX ON INVOICE (CUSTOMER_ID);

ALTER TABLE INVOICE_LINE
    ADD CONSTRAINT INVOICE_LINE_INVOICE_ID_FKEY FOREIGN KEY (
        INVOICE_ID
    )
        REFERENCES INVOICE (
            INVOICE_ID
        ) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE INDEX INVOICE_LINE_INVOICE_ID_IDX ON INVOICE_LINE (INVOICE_ID);

ALTER TABLE INVOICE_LINE
    ADD CONSTRAINT INVOICE_LINE_TRACK_ID_FKEY FOREIGN KEY (
        TRACK_ID
    )
        REFERENCES TRACK (
            TRACK_ID
        ) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE INDEX INVOICE_LINE_TRACK_ID_IDX ON INVOICE_LINE (TRACK_ID);

ALTER TABLE PLAYLIST_TRACK
    ADD CONSTRAINT PLAYLIST_TRACK_PLAYLIST_ID_FKEY FOREIGN KEY (
        PLAYLIST_ID
    )
        REFERENCES PLAYLIST (
            PLAYLIST_ID
        ) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE INDEX PLAYLIST_TRACK_PLAYLIST_ID_IDX ON PLAYLIST_TRACK (PLAYLIST_ID);

ALTER TABLE PLAYLIST_TRACK
    ADD CONSTRAINT PLAYLIST_TRACK_TRACK_ID_FKEY FOREIGN KEY (
        TRACK_ID
    )
        REFERENCES TRACK (
            TRACK_ID
        ) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE INDEX PLAYLIST_TRACK_TRACK_ID_IDX ON PLAYLIST_TRACK (TRACK_ID);

ALTER TABLE TRACK
    ADD CONSTRAINT TRACK_ALBUM_ID_FKEY FOREIGN KEY (
        ALBUM_ID
    )
        REFERENCES ALBUM (
            ALBUM_ID
        ) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE INDEX TRACK_ALBUM_ID_IDX ON TRACK (ALBUM_ID);

ALTER TABLE TRACK
    ADD CONSTRAINT TRACK_GENRE_ID_FKEY FOREIGN KEY (
        GENRE_ID
    )
        REFERENCES GENRE (
            GENRE_ID
        ) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE INDEX TRACK_GENRE_ID_IDX ON TRACK (GENRE_ID);

ALTER TABLE TRACK
    ADD CONSTRAINT TRACK_MEDIA_TYPE_ID_FKEY FOREIGN KEY (
        MEDIA_TYPE_ID
    )
        REFERENCES MEDIA_TYPE (
            MEDIA_TYPE_ID
        ) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE INDEX TRACK_MEDIA_TYPE_ID_IDX ON TRACK (MEDIA_TYPE_ID);
