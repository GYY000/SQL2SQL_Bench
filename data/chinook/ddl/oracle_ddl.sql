/*******************************************************************************
   Create Table
********************************************************************************/

CREATE TABLE ALBUM (
    ALBUMID NUMBER NOT NULL,
    TITLE VARCHAR2(160) NOT NULL,
    ARTISTID NUMBER NOT NULL,
    CONSTRAINT PK_ALBUM PRIMARY KEY (ALBUMID)
);

CREATE TABLE ARTIST (
    ARTISTID NUMBER NOT NULL,
    NAME VARCHAR2(120),
    CONSTRAINT PK_ARTIST PRIMARY KEY (ARTISTID)
);

CREATE TABLE CUSTOMER (
    CUSTOMERID NUMBER NOT NULL,
    FIRSTNAME VARCHAR2(40) NOT NULL,
    LASTNAME VARCHAR2(20) NOT NULL,
    COMPANY VARCHAR2(80),
    ADDRESS VARCHAR2(70),
    CITY VARCHAR2(40),
    STATE VARCHAR2(40),
    COUNTRY VARCHAR2(40),
    POSTALCODE VARCHAR2(10),
    PHONE VARCHAR2(24),
    FAX VARCHAR2(24),
    EMAIL VARCHAR2(60) NOT NULL,
    SUPPORTREPID NUMBER,
    CONSTRAINT PK_CUSTOMER PRIMARY KEY (CUSTOMERID)
);

CREATE TABLE EMPLOYEE (
    EMPLOYEEID NUMBER NOT NULL,
    LASTNAME VARCHAR2(20) NOT NULL,
    FIRSTNAME VARCHAR2(20) NOT NULL,
    TITLE VARCHAR2(30),
    REPORTSTO NUMBER,
    BIRTHDATE DATE,
    HIREDATE DATE,
    ADDRESS VARCHAR2(70),
    CITY VARCHAR2(40),
    STATE VARCHAR2(40),
    COUNTRY VARCHAR2(40),
    POSTALCODE VARCHAR2(10),
    PHONE VARCHAR2(24),
    FAX VARCHAR2(24),
    EMAIL VARCHAR2(60),
    CONSTRAINT PK_EMPLOYEE PRIMARY KEY (EMPLOYEEID)
);

CREATE TABLE GENRE (
    GENREID NUMBER NOT NULL,
    NAME VARCHAR2(120),
    CONSTRAINT PK_GENRE PRIMARY KEY (GENREID)
);

CREATE TABLE INVOICE (
    INVOICEID NUMBER NOT NULL,
    CUSTOMERID NUMBER NOT NULL,
    INVOICEDATE DATE NOT NULL,
    BILLINGADDRESS VARCHAR2(70),
    BILLINGCITY VARCHAR2(40),
    BILLINGSTATE VARCHAR2(40),
    BILLINGCOUNTRY VARCHAR2(40),
    BILLINGPOSTALCODE VARCHAR2(10),
    TOTAL NUMBER(10, 2) NOT NULL,
    CONSTRAINT PK_INVOICE PRIMARY KEY (INVOICEID)
);

CREATE TABLE INVOICELINE (
    INVOICELINEID NUMBER NOT NULL,
    INVOICEID NUMBER NOT NULL,
    TRACKID NUMBER NOT NULL,
    UNITPRICE NUMBER(10, 2) NOT NULL,
    QUANTITY NUMBER NOT NULL,
    CONSTRAINT PK_INVOICELINE PRIMARY KEY (INVOICELINEID)
);

CREATE TABLE MEDIATYPE (
    MEDIATYPEID NUMBER NOT NULL,
    NAME VARCHAR2(120),
    CONSTRAINT PK_MEDIATYPE PRIMARY KEY (MEDIATYPEID)
);

CREATE TABLE PLAYLIST (
    PLAYLISTID NUMBER NOT NULL,
    NAME VARCHAR2(120),
    CONSTRAINT PK_PLAYLIST PRIMARY KEY (PLAYLISTID)
);

CREATE TABLE PLAYLISTTRACK (
    PLAYLISTID NUMBER NOT NULL,
    TRACKID NUMBER NOT NULL,
    CONSTRAINT PK_PLAYLISTTRACK PRIMARY KEY (PLAYLISTID, TRACKID)
);

CREATE TABLE TRACK (
    TRACKID NUMBER NOT NULL,
    NAME VARCHAR2(200) NOT NULL,
    ALBUMID NUMBER,
    MEDIATYPEID NUMBER NOT NULL,
    GENREID NUMBER,
    COMPOSER VARCHAR2(220),
    MILLISECONDS NUMBER NOT NULL,
    BYTES NUMBER,
    UNITPRICE NUMBER(10, 2) NOT NULL,
    CONSTRAINT PK_TRACK PRIMARY KEY (TRACKID)
);

/*******************************************************************************
   Create Primary Key Unique Indexes
********************************************************************************/

/*******************************************************************************
   Create Foreign Keys
********************************************************************************/
ALTER TABLE ALBUM
    ADD CONSTRAINT FK_ALBUMARTISTID FOREIGN KEY (
        ARTISTID
    )
        REFERENCES ARTIST (
            ARTISTID
        );

ALTER TABLE CUSTOMER
    ADD CONSTRAINT FK_CUSTOMERSUPPORTREPID FOREIGN KEY (
        SUPPORTREPID
    )
        REFERENCES EMPLOYEE (
            EMPLOYEEID
        );

ALTER TABLE EMPLOYEE
    ADD CONSTRAINT FK_EMPLOYEEREPORTSTO FOREIGN KEY (
        REPORTSTO
    )
        REFERENCES EMPLOYEE (
            EMPLOYEEID
        );

ALTER TABLE INVOICE
    ADD CONSTRAINT FK_INVOICECUSTOMERID FOREIGN KEY (
        CUSTOMERID
    )
        REFERENCES CUSTOMER (
            CUSTOMERID
        );

ALTER TABLE INVOICELINE
    ADD CONSTRAINT FK_INVOICELINEINVOICEID FOREIGN KEY (
        INVOICEID
    )
        REFERENCES INVOICE (
            INVOICEID
        );

ALTER TABLE INVOICELINE
    ADD CONSTRAINT FK_INVOICELINETRACKID FOREIGN KEY (
        TRACKID
    )
        REFERENCES TRACK (
            TRACKID
        );

ALTER TABLE PLAYLISTTRACK
    ADD CONSTRAINT FK_PLAYLISTTRACKPLAYLISTID FOREIGN KEY (
        PLAYLISTID
    )
        REFERENCES PLAYLIST (
            PLAYLISTID
        );

ALTER TABLE PLAYLISTTRACK
    ADD CONSTRAINT FK_PLAYLISTTRACKTRACKID FOREIGN KEY (
        TRACKID
    )
        REFERENCES TRACK (
            TRACKID
        );

ALTER TABLE TRACK
    ADD CONSTRAINT FK_TRACKALBUMID FOREIGN KEY (
        ALBUMID
    )
        REFERENCES ALBUM (
            ALBUMID
        );

ALTER TABLE TRACK
    ADD CONSTRAINT FK_TRACKGENREID FOREIGN KEY (
        GENREID
    )
        REFERENCES GENRE (
            GENREID
        );

ALTER TABLE TRACK
    ADD CONSTRAINT FK_TRACKMEDIATYPEID FOREIGN KEY (
        MEDIATYPEID
    )
        REFERENCES MEDIATYPE (
            MEDIATYPEID
        );
